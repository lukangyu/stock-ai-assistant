# ğŸ“ˆ Stock AI Assistant - ä¸ªäººè‚¡ç¥¨åˆ†æAIåŠ©æ‰‹

[![CI](https://github.com/lukangyu/stock-ai-assistant/actions/workflows/ci.yml/badge.svg)](https://github.com/lukangyu/stock-ai-assistant/actions/workflows/ci.yml)
[![Deploy](https://github.com/lukangyu/stock-ai-assistant/actions/workflows/deploy.yml/badge.svg)](https://github.com/lukangyu/stock-ai-assistant/actions/workflows/deploy.yml)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

ä¸€æ¬¾åŸºäº AI çš„ä¸ªäººè‚¡ç¥¨åˆ†æåŠ©æ‰‹ï¼Œä¸“ä¸º A è‚¡å¸‚åœºè®¾è®¡ï¼Œæä¾›æ™ºèƒ½åˆ†æã€æŠ•èµ„å»ºè®®å’Œé‚®ä»¶æ¨é€åŠŸèƒ½ã€‚

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [ä¸»è¦åŠŸèƒ½](#ä¸»è¦åŠŸèƒ½)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚)
- [å®‰è£…éƒ¨ç½²](#å®‰è£…éƒ¨ç½²)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#è®¸å¯è¯)
- [è”ç³»æ–¹å¼](#è”ç³»æ–¹å¼)

---

## é¡¹ç›®æ¦‚è¿°

Stock AI Assistant æ˜¯ä¸€æ¬¾é¢å‘ä¸ªäººæŠ•èµ„è€…çš„è‚¡ç¥¨åˆ†æå·¥å…·ï¼Œé€šè¿‡æ•´åˆæŠ€æœ¯æŒ‡æ ‡åˆ†æã€æ–°é—»æƒ…ç»ªåˆ†æå’Œé€šä¹‰åƒé—® AI å¤§æ¨¡å‹ï¼Œä¸ºç”¨æˆ·æä¾›ä¸“ä¸šã€æ˜“æ‡‚çš„æŠ•èµ„å»ºè®®ã€‚

### è®¾è®¡ç›®æ ‡

- ğŸ¯ **æ–°æ‰‹å‹å¥½**: æ‰€æœ‰åˆ†æç»“æœéƒ½ç”¨å¤§ç™½è¯è§£é‡Šï¼Œé¿å…ä¸“ä¸šæœ¯è¯­
- ğŸ¤– **AI é©±åŠ¨**: åŸºäºé€šä¹‰åƒé—®å¤§æ¨¡å‹ï¼Œæä¾›æ™ºèƒ½æŠ•èµ„å»ºè®®
- ğŸ“Š **å…¨é¢åˆ†æ**: æ•´åˆ 50+ æŠ€æœ¯æŒ‡æ ‡ã€æ–°é—»æƒ…ç»ªã€å¸‚åœºç¯å¢ƒ
- ğŸ“§ **é‚®ä»¶æ¨é€**: å®šæ—¶å‘é€åˆ†ææŠ¥å‘Šåˆ°é‚®ç®±
- ğŸ”’ **å®‰å…¨å¯é **: æœ¬åœ°éƒ¨ç½²ï¼Œæ•°æ®å®‰å…¨å¯æ§

---

## ä¸»è¦åŠŸèƒ½

### ğŸ” è‚¡ç¥¨åˆ†æ

- **æŠ€æœ¯æŒ‡æ ‡åˆ†æ**: MAã€MACDã€RSIã€KDJã€å¸ƒæ—å¸¦ã€ATRã€ADX ç­‰ 50+ æŒ‡æ ‡
- **æ”¯æ’‘ä½/é˜»åŠ›ä½**: è‡ªåŠ¨è¯†åˆ«å…³é”®ä»·æ ¼ä½ç½®
- **è¶‹åŠ¿åˆ¤æ–­**: ä¸Šæ¶¨/ä¸‹è·Œ/æ¨ªç›˜éœ‡è¡è¶‹åŠ¿è¯†åˆ«
- **ä¹°å–ä¿¡å·**: åŸºäºå¤šæŒ‡æ ‡ç»¼åˆåˆ¤æ–­

### ğŸ“ æŠ•èµ„å»ºè®®

- **ä»“ä½å»ºè®®**: æ–°æ‰‹å‹å¥½çš„ä»“ä½æ¯”ä¾‹å»ºè®®ï¼ˆ5%-10%ï¼‰
- **åˆ†æ¡£æ­¢ç›ˆ**: 10%/20%/30% ä¸‰æ¡£æ­¢ç›ˆç­–ç•¥
- **æ­¢æŸç­–ç•¥**: åˆå§‹æ­¢æŸ + ç§»åŠ¨æ­¢æŸ + å¼ºåˆ¶æ¸…ä»“æ¡ä»¶
- **é£é™©æç¤º**: è¯¦ç»†çš„é£é™©å› ç´ åˆ—è¡¨å’Œåº”å¯¹æ–¹æ³•

### ğŸ“° æ–°é—»åˆ†æ

- **çƒ­ç‚¹æ–°é—»**: è‡ªåŠ¨è·å–è´¢ç»çƒ­ç‚¹æ–°é—»
- **æƒ…ç»ªåˆ†æ**: åˆ†ææ–°é—»å¯¹è‚¡ä»·çš„å½±å“
- **æ¿å—å…³è”**: è¯†åˆ«å—å½±å“çš„è¡Œä¸šæ¿å—

### ğŸ“§ é‚®ä»¶æ¨é€

- **å®šæ—¶æŠ¥å‘Š**: æ¯æ—¥æ”¶ç›˜åè‡ªåŠ¨å‘é€åˆ†ææŠ¥å‘Š
- **HTML é‚®ä»¶**: ç²¾ç¾çš„é‚®ä»¶æ¨¡æ¿
- **è‡ªå®šä¹‰é…ç½®**: æ”¯æŒè‡ªå®šä¹‰æ¨é€æ—¶é—´å’Œè‚¡ç¥¨åˆ—è¡¨

---

## æŠ€æœ¯æ ˆ

### åç«¯æœåŠ¡

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Java | 17 | ä¸»è¦å¼€å‘è¯­è¨€ |
| Spring Boot | 3.2.0 | åç«¯æ¡†æ¶ |
| Spring Mail | - | é‚®ä»¶æœåŠ¡ |
| Thymeleaf | - | æ¨¡æ¿å¼•æ“ |
| WebFlux | - | å“åº”å¼ HTTP å®¢æˆ·ç«¯ |

### AI æœåŠ¡

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Python | 3.11+ | AI æœåŠ¡å¼€å‘è¯­è¨€ |
| FastAPI | 0.104.0+ | Web æ¡†æ¶ |
| AKShare | 1.12.0+ | A è‚¡æ•°æ®æº |
| DashScope | 1.14.0+ | é€šä¹‰åƒé—® SDK |
| Pandas | 2.0.0+ | æ•°æ®å¤„ç† |
| Plotly | 5.18.0+ | å¯è§†åŒ–å›¾è¡¨ |

### éƒ¨ç½²è¿ç»´

| æŠ€æœ¯ | è¯´æ˜ |
|------|------|
| Docker | å®¹å™¨åŒ–éƒ¨ç½² |
| Docker Compose | æœåŠ¡ç¼–æ’ |
| Nginx | åå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰ |

---

## ç¯å¢ƒè¦æ±‚

### å¼€å‘ç¯å¢ƒ

- **JDK**: 17+
- **Python**: 3.11+
- **Maven**: 3.8+
- **Node.js**: 18+ (å¯é€‰ï¼Œç”¨äºå‰ç«¯å¼€å‘)

### ç”Ÿäº§ç¯å¢ƒ

- **æ“ä½œç³»ç»Ÿ**: Linux (Ubuntu 20.04+ / CentOS 7+)
- **å†…å­˜**: è‡³å°‘ 2GB
- **Docker**: 20.10+
- **Docker Compose**: 2.0+

---

## å®‰è£…éƒ¨ç½²

### æ–¹å¼ä¸€ï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/lukangyu/stock-ai-assistant.git
cd stock-ai-assistant
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
# é€šä¹‰åƒé—® API å¯†é’¥ï¼ˆå¿…å¡«ï¼‰
DASHSCOPE_API_KEY=sk-xxxxxxxxxxxxx

# é‚®ä»¶é…ç½®ï¼ˆå¿…å¡«ï¼‰
MAIL_USERNAME=your_email@qq.com
MAIL_PASSWORD=your_smtp_password
RECEIVER_EMAIL=your_email@example.com
```

#### 3. ä¸€é”®éƒ¨ç½²

```bash
chmod +x deploy.sh
./deploy.sh
```

#### 4. éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘

#### 1. å®‰è£…ä¾èµ–

**Python AI æœåŠ¡ï¼š**

```bash
cd ai-service
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ– venv\Scripts\activate  # Windows

pip install -r requirements.txt
```

**Java åç«¯ï¼š**

```bash
mvn clean install
```

#### 2. é…ç½®ç¯å¢ƒ

åˆ›å»º `ai-service/.env` æ–‡ä»¶ï¼š

```env
DASHSCOPE_API_KEY=sk-xxxxxxxxxxxxx
```

#### 3. å¯åŠ¨æœåŠ¡

**å¯åŠ¨ AI æœåŠ¡ï¼š**

```bash
cd ai-service
python main.py
# æˆ–
uvicorn main:app --host 0.0.0.0 --port 8000
```

**å¯åŠ¨ Java åç«¯ï¼š**

```bash
mvn spring-boot:run
```

#### 4. è®¿é—®æœåŠ¡

- AI æœåŠ¡: http://localhost:8000
- Java åç«¯: http://localhost:8080
- API æ–‡æ¡£: http://localhost:8000/docs

---

## ä½¿ç”¨æŒ‡å—

### åŸºæœ¬æ“ä½œ

#### 1. åˆ†æå•åªè‚¡ç¥¨

```bash
# API è¯·æ±‚
curl http://localhost:8000/api/analyze/stock/600519
```

#### 2. æ‰¹é‡åˆ†æè‚¡ç¥¨

```bash
curl -X POST http://localhost:8000/api/analyze/stocks \
  -H "Content-Type: application/json" \
  -d '{"codes": ["600519", "000858", "000001"]}'
```

#### 3. å‘é€åˆ†ææŠ¥å‘Šé‚®ä»¶

```bash
curl -X POST http://localhost:8080/api/report/send
```

#### 4. AI å¯¹è¯

```bash
curl -X POST http://localhost:8000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"question": "è´µå·èŒ…å°ç°åœ¨é€‚åˆä¹°å…¥å—ï¼Ÿ"}'
```

### å®šæ—¶ä»»åŠ¡

åœ¨ `application.yml` ä¸­é…ç½®å®šæ—¶ä»»åŠ¡ï¼š

```yaml
stock:
  schedule:
    cron: "0 0 18 * * MON-FRI"  # æ¯ä¸ªå·¥ä½œæ—¥ 18:00
```

---

## é¡¹ç›®ç»“æ„

```
stock-ai-assistant/
â”œâ”€â”€ ai-service/                    # Python AI æœåŠ¡
â”‚   â”œâ”€â”€ services/                  # æœåŠ¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ tongyi_service.py      # é€šä¹‰åƒé—® AI æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ stock_data.py          # è‚¡ç¥¨æ•°æ®æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ news_service.py        # æ–°é—»æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ technical_analysis.py  # æŠ€æœ¯åˆ†ææœåŠ¡
â”‚   â”‚   â”œâ”€â”€ feature_engineering/   # ç‰¹å¾å·¥ç¨‹
â”‚   â”‚   â”‚   â””â”€â”€ technical_indicators.py  # æŠ€æœ¯æŒ‡æ ‡
â”‚   â”‚   â””â”€â”€ visualization/         # å¯è§†åŒ–
â”‚   â”‚       â””â”€â”€ chart_builder.py   # å›¾è¡¨æ„å»º
â”‚   â”œâ”€â”€ main.py                    # FastAPI ä¸»å…¥å£
â”‚   â”œâ”€â”€ requirements.txt           # Python ä¾èµ–
â”‚   â””â”€â”€ Dockerfile                 # AI æœåŠ¡é•œåƒ
â”‚
â”œâ”€â”€ src/main/java/com/personal/stock/  # Java åç«¯
â”‚   â”œâ”€â”€ controller/                # æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ StockController.java
â”‚   â”œâ”€â”€ service/                   # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ StockDataService.java
â”‚   â”‚   â”œâ”€â”€ EmailService.java
â”‚   â”‚   â”œâ”€â”€ DailyReportService.java
â”‚   â”‚   â””â”€â”€ client/
â”‚   â”‚       â””â”€â”€ PythonServiceClient.java
â”‚   â”œâ”€â”€ dto/                       # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ StockInfo.java
â”‚   â”‚   â”œâ”€â”€ StockAnalysisResult.java
â”‚   â”‚   â””â”€â”€ DailyReport.java
â”‚   â””â”€â”€ config/                    # é…ç½®ç±»
â”‚       â”œâ”€â”€ StockEmailConfig.java
â”‚       â””â”€â”€ PythonServiceConfig.java
â”‚
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ templates/                 # é‚®ä»¶æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ alert.html
â”‚   â””â”€â”€ application.yml            # åº”ç”¨é…ç½®
â”‚
â”œâ”€â”€ docker-compose.yml             # Docker ç¼–æ’
â”œâ”€â”€ Dockerfile                     # Java åç«¯é•œåƒ
â”œâ”€â”€ nginx.conf                     # Nginx é…ç½®
â”œâ”€â”€ deploy.sh                      # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ pom.xml                        # Maven é…ç½®
â””â”€â”€ README.md                      # é¡¹ç›®æ–‡æ¡£
```

---

## API æ–‡æ¡£

### AI æœåŠ¡ API (Port 8000)

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/health` | å¥åº·æ£€æŸ¥ |
| GET | `/api/analyze/stock/{code}` | åˆ†æå•åªè‚¡ç¥¨ |
| POST | `/api/analyze/stocks` | æ‰¹é‡åˆ†æè‚¡ç¥¨ |
| GET | `/api/features/technical/{code}` | è·å–æŠ€æœ¯æŒ‡æ ‡ |
| GET | `/api/visualization/chart/{code}` | è·å–è‚¡ç¥¨å›¾è¡¨ |
| POST | `/api/chat` | AI å¯¹è¯ |
| GET | `/api/news/hot` | è·å–çƒ­ç‚¹æ–°é—» |
| GET | `/api/news/analyze` | åˆ†ææ–°é—»å½±å“ |
| GET | `/api/market/summary` | è·å–å¸‚åœºæ¦‚å†µ |

### Java åç«¯ API (Port 8080)

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/health` | å¥åº·æ£€æŸ¥ |
| POST | `/api/report/send` | å‘é€æ¯æ—¥æŠ¥å‘Š |
| GET | `/api/analyze/{code}` | åˆ†æå¹¶å‘é€è‚¡ç¥¨æŠ¥å‘Š |

### äº¤äº’å¼æ–‡æ¡£

å¯åŠ¨æœåŠ¡åè®¿é—®ï¼š
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

---

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | å¿…å¡« | è¯´æ˜ |
|--------|------|------|
| `DASHSCOPE_API_KEY` | âœ… | é€šä¹‰åƒé—® API å¯†é’¥ |
| `MAIL_USERNAME` | âœ… | å‘ä»¶äººé‚®ç®± |
| `MAIL_PASSWORD` | âœ… | SMTP æˆæƒç  |
| `RECEIVER_EMAIL` | âœ… | æ”¶ä»¶äººé‚®ç®± |

### è·å– API å¯†é’¥

1. **é€šä¹‰åƒé—® API**
   - è®¿é—® [é˜¿é‡Œäº‘ DashScope](https://dashscope.console.aliyun.com/)
   - å¼€é€šæœåŠ¡å¹¶åˆ›å»º API Key

2. **QQ é‚®ç®± SMTP**
   - ç™»å½• QQ é‚®ç®± â†’ è®¾ç½® â†’ è´¦æˆ·
   - å¼€å¯ POP3/SMTP æœåŠ¡
   - ç”Ÿæˆæˆæƒç 

---

## è´¡çŒ®æŒ‡å—

### ä»£ç è§„èŒƒ

- **Java**: éµå¾ª Google Java Style Guide
- **Python**: éµå¾ª PEP 8 è§„èŒƒ
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡åå’Œå‡½æ•°å
- æ·»åŠ å¿…è¦çš„æ³¨é‡Š

### æäº¤è§„èŒƒ

ä½¿ç”¨ Conventional Commitsï¼š

```
feat: æ·»åŠ æ–°åŠŸèƒ½
fix: ä¿®å¤ bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

### PR æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

---

## å¸¸è§é—®é¢˜

### Q: AI æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Ÿ

æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `DASHSCOPE_API_KEY` æ˜¯å¦æ­£ç¡®é…ç½®ã€‚

### Q: é‚®ä»¶å‘é€å¤±è´¥ï¼Ÿ

1. ç¡®è®¤é‚®ç®± SMTP æœåŠ¡å·²å¼€å¯
2. ä½¿ç”¨æˆæƒç è€Œéé‚®ç®±å¯†ç 
3. æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦æ”¾è¡Œ SMTP ç«¯å£

### Q: è‚¡ç¥¨æ•°æ®è·å–å¤±è´¥ï¼Ÿ

AKShare æ•°æ®æºå¯èƒ½ä¸ç¨³å®šï¼Œå»ºè®®ï¼š
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ç¨åé‡è¯•
3. è€ƒè™‘æ·»åŠ å¤‡ç”¨æ•°æ®æº

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## è”ç³»æ–¹å¼

- **ä½œè€…**: Your Name
- **é‚®ç®±**: your.email@example.com
- **GitHub**: [@your-username](https://github.com/your-username)

---

## è‡´è°¢

- [AKShare](https://github.com/akfamily/akshare) - ä¼˜ç§€çš„ A è‚¡æ•°æ®æ¥å£
- [é€šä¹‰åƒé—®](https://tongyi.aliyun.com/) - é˜¿é‡Œäº‘å¤§è¯­è¨€æ¨¡å‹
- [Spring Boot](https://spring.io/projects/spring-boot) - å¼ºå¤§çš„ Java æ¡†æ¶
- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£åŒ–çš„ Python Web æ¡†æ¶

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª Starï¼
